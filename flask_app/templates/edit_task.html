<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit {{task.task_name}}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
  <div style="margin: 1vh 1vw;">
    <div class="d-flex justify-content-between">
      <h1>Edit {{task.task_name}}</h1>
      <a href="/dashboard" class="align-self-center">Return to the dashboard</a>
    </div>
  
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <p>{{message}}</p>
        {% endfor %}
      {% endif %}
    {% endwith %}
  
    <form action="/tasks/{{task.id}}/update" method="POST">
      <label for="task_name">Edit Task Name: </label> <!-- "name" matches with id attribute for input -->
      <input type="text" id="task_name" name="task_name" value='{{task.task_name}}' maxlength="60"><br/>
  
      <label for="due_date">Edit Due Date: </label>
      <input type="datetime-local" id="due_date" name="due_date"
      min="{{current_datetime}}" value="{{task.due_date}}"><br/>
      
      <label for="privacy_status">Edit Privacy: </label>
      <select id="privacy_status" name="privacy_status">
        {% if task.privacy_status == 0 %}
          <option value="0" selected>Private</option>
          <option value="1">Public</option>
        {% else %}
          <option value="0" selected>Private</option>
          <option value="1" selected>Public</option>
        {% endif %}
      </select><br/>
  
      {% set current_completion_status = task.completion_status %}
  
      <label for="completion_status">Edit Completion Status: </label>
      <select id="completion_status" name="completion_status">
        {% if task.completion_status == 0 %}
          <option value="0" selected>Incomplete</option>
          <option value="1">Complete</option>
          {% else %}
          <option value="0" selected>Incomplete</option>
          <option value="1" selected>Complete</option>
          {% endif %}
        </select><br/>
      
      <label for="description">Description: </label>
      <textarea id="description" name="description" maxlength="1000" rows="5"cols="25">{{task.description}}</textarea><br/>
      
      <button type="submit">Save</button>
    </form>
  </div>
  
</body>

</html>